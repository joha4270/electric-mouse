@model CommentViewModel

<div style="margin-left:5em" class="comment" data-id="1">

    <br />
    @if (Model.Deleted)
    {
        <div> 
            <b>COMMENT HAS BEEN VIOLENTLY AND VIGOROUSLY PURGED BY THE MINISTRY OF PUBLIC DECENCY</b> (@Model.Date.ToString("dd-mm-yy"))
        </div>
    } else
    {
        <img src="@Model.User.URLPath" width="32" height="32" style="display:inline" />
        <div style="display:inline">
            <label><b> @Model.User.DisplayName</b> (@Model.Date.ToString("dd-mm-yy") ) </label>

            <br />

            @Model.Content

            <br>
        </div>
        @if (Model.DeletionRights)
        {
            <form asp-controller="Route" asp-action="Delete" style="display:inline"  method="post">
                <input asp-for="ApplicationUserRefId" type="hidden" value="@Model.ApplicationUserRefId" />
                <input asp-for="CommentID" type="hidden" value="@Model.CommentID" />
                <input type="submit" value="D" />
            </form>
        }
        @*@if (Model.EditRights)
    {
        <div class="show_edit_field" style="display:inline">
            <button class="btn" type="button">
                E
            </button>
        </div>
        <div style="display:none;" class="edit_field">
            <form asp-controller="Route" asp-action="Reply" method="post">
                <input name="Content" type="text" class="materialize-textarea" height="4" width="20" />
                <input class="btn" type="submit" value="THAT'S BETTER" />
                <input asp-for="RouteID" type="hidden" value="@Model.RouteID" />
                <input asp-for="CommentID" type="hidden" value="@Model.CommentID" />
            </form>
        </div>
    }*@
    }
    @if (Model.User != null) {
        @*The button that brings up the reply field.*@
        <div class="show_reply_field" style="display:inline">
            <button class="btn" type="button">
                RETORT
            </button>
        </div>
        @*This is the field that replies can be written in.*@
        <div style="display:none;" class="reply_field">
            <form asp-controller="Route" asp-action="Reply" method="post">
                <input name="Content" type="text" class="materialize-textarea" height="4" width="20" />
                <input  class="btn" type="submit" value="THAT'LL SHOW HIM" />
                <input asp-for="RouteID" type="hidden" value="@Model.RouteID"/>
                <input asp-for="CommentID" type="hidden" value="@Model.CommentID" />
            </form>
        </div>
    }
    <br />

    @*Print comment children below.*@
    @foreach (CommentViewModel child in Model.Children)
    {
        @Html.Partial("Comment", child);
    }
</div>